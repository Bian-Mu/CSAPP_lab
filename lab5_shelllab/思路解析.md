# 解析

## eval()

- 如果是内置命令，则进入builtin_cmd函数
- 非内置命令，在创建子进程之前阻碍chld信号：
  1. 对于子进程，设置单独的进程组号，避免被误杀；恢复信号，同时检查首个参数是否可执行
  2. 对于父进程，阻碍所有信号，添加工作后恢复；根据前后台进行不同的操作

## builtin_cmd()

- 根据命令进行不同操作

## do_bgfg()

- 前台：
  1. 在指令正确的情况下，识别pid/jid
  2. 如果存在该工作，则发送启动信号并等待前台

- 后台：
  1. 在指令正确的情况下，识别pid/jid
  2. 如果存在该工作，则发送启动信号

## waitfg()

- 设置空信号集，在前台工作完成前保持挂起

## sigchld_handler()

- 保持errno前后不变
- 阻塞全信号，在有僵死子进程的情况下，捕捉僵死子进程
- 删除终止进程，挂起停止进程
- 该函数会检查所有status,无论是前台工作被终止/停止而调用下面函数发出的信号，还是自然结束的工作信号

## sigint_handler()

- 保持errno前后不变
- 阻塞全信号，向shell发送sigint信号

## sigtstp_handler()

- 保持errno前后不变
- 阻塞全信号，向shell发送sigtstp信号
